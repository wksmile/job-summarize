##### CSRF
- 基本概念和缩写？
    + CSRF,通常称为跨站请求伪造，英文名Cross-site request forgery缩写CSRF
- 攻击原理？<img src="./safe.png">。攻击者盗用了你的身份，以你的名义发送恶意请求。

要完成一次CSRF攻击，受害者必须依次完成两个步骤：
1. 登录受信任网站A，并在本地生成Cookie
2. 在不登出A的情况下，访问危险网站B

csrf攻击的具体流程是什么样的，为什么B网站的请求会带上A网站的cookies?

- 防御措施？
    + Token验证，因为攻击携带的是原来网站的cookie，并没有带token，cookie是自动发送，token需要手动发送
    + 验证码，每次的用户提交都需要用户在表单中填写一个图片上的随机字符串
    + 判断 referer 头，如果不是来自本网站的请求，就判定为CSRF攻击。但是该方法只能防御跨站的csrf攻击，不能防御同站的csrf攻击
    
##### XSS
- 基本概念缩写：cross-site scripting跨域脚本攻击
- 攻击原理,防御措施： http://www.imooc.com/learn/812
- 对比CSRF和XSS的区别?
    xss：用户过分信任网站，放任来自浏览器地址栏代表的那个网站代码在自己本地任意执行。如果没有浏览器的安全机制限制，xss代码可以在用户浏览器为所欲为； 
    csrf：网站过分信任用户，放任来自所谓通过访问控制机制的代表合法用户的请求执行网站的某个特定功能。
- 防御措施:
    + 设置HttpOnly头，不允许js操作cookies
    + secure请求头，告诉浏览器仅在请求为https的时候发送cookie
    + 在表单提交或者url参数传递前,在代码输出前，对需要的参数进行过滤
    + 编码转义HTMLEncode，会对一些html的特殊字符进行实体化
    + 针对`& < > " , \ /`字符进行实体化转义`&amp; &lt; &gt; &quot; &#x27; &#x2F`
    + 如果是字符串操作，保证字符串被引号包裹。不能使用eval ，new fuction，settimeout执行动态字符串，因为这个字符串很可能就是一个xss代码，如果无法避免，那么也要转义之后再参与运算。

**XSS类型**：
1. 存储型XSS: 前端提交的数据未经处理存储到数据库中，当用户请求数据，存在XSS攻击的数据，返回给客户端。若数据未经过任何转义。被浏览器渲染。就可能导致XSS攻击；
2. 反射型XSS: 将用户输入的存在XSS攻击的数据，发送给后台，后台并未对数据进行存储，也未经过任何过滤，直接返回给客户端。被浏览器渲染。就可能导致XSS攻击；
3. DOM-XSS: 渲染DOM属性时将攻击脚本插入DOM属性中被解析而导致的。纯前端攻击，没有后端参与。

**问**：对前端安全的理解？
* XSS
* CSRF
* SQL注入
* 点击劫持
* 社会工程学 [链接](https://www.zhihu.com/question/26113526?sort=created)
* 攻防方式


##### 点击劫持
恶意网站使用 <iframe> 标签把我方的一些含有重要信息类如交易的网页嵌入进去，然后把 iframe 设置透明，用定位的手段的把一些引诱用户在恶意网页上点击。

**防范**：
1. 判断顶层视口的域名和本页面的域名是否一致，不一致就跳转到我方的网页 ``top.location.hostname !== self.location.hostname``
2. 通过配置 nginx 发送 X-Frame-Options 响应头，这样浏览器就会阻止嵌入网页的渲染。[参考](https://developer.mozilla.org/zh-CN/docs/Web/HTTP/X-Frame-Options)

#### SQL注入
页面提交的数据到服务器后端，在服务器端未进行数据验证就将数据直接拼到SQL语句中执行，因此产生于预期不同的现象。

防范：
1. 严格限制Web应用的数据库的操作权限，给此用户提供仅仅能够满足其工作的最低权限，从而最大限度的减少注入攻击对数据库的危害。
2. 检查输入的数据是否具有所期望的数据格式，严格限制变量的类型，例如使用regexp包进行一些匹配处理，或者使用strconv包对字符串转化成其他基本类型的数据进行判断。
3. 对进入数据库的特殊字符（'"\尖括号&*;等）进行转义处理，或编码转换。Go 的text/template包里面的HTMLEscapeString函数可以对字符串进行转义处理。
4. 所有的查询语句建议使用数据库提供的参数化查询接口，参数化的语句使用参数而不是将用户输入变量嵌入到SQL语句中，即不要直接拼接SQL语句。例如使用database/sql里面的查询函数Prepare和Query，或者Exec(query string, args ...interface{})。
5. 在应用发布之前建议使用专业的SQL注入检测工具进行检测，以及时修补被发现的SQL注入漏洞。网上有很多这方面的开源工具，例如sqlmap、SQLninja等。
6. 避免网站打印出SQL错误信息，比如类型错误、字段不匹配等，把代码里的SQL语句暴露出来，以防止攻击者利用这些错误信息进行SQL注入。




